<div class="container py-5">

  <!-- ===== Messages ===== -->
  <div class="msg-box" *ngIf="showMessage">
    <p class="msg-ar">{{ messageAr }}</p>
    <p class="msg-en">{{ messageEn }}</p>

    <button *ngIf="userHasDetails" routerLink="/userDetails">
      update
    </button>
  </div>

  <div class="d-flex justify-content-start mb-4 wow fadeInUp">
    <button (click)="viewHistory()" class="btn btn-sm btn-history shadow-sm">
      View My Order History
    </button>
  </div>

  <div *ngIf="isAdmin()" class="d-flex justify-content-start mb-4 wow fadeInUp">
    <button (click)="viewAllHistory()" class="btn btn-sm btn-history shadow-sm">
      View All Order History
    </button>
  </div>

  <div class="text-center mb-5">
    <h1 class="display-5 text-uppercase fw-bold" style="color: #FEA116;">
      Your Order
    </h1>
  </div>

  <div class="row g-4 mb-5">
    <div class="col-lg-6 wow fadeInUp" *ngFor="let item of cartItemHelper">
      <div class="menu-item-card d-flex align-items-center bg-light rounded shadow-sm p-3 zoom-effect">

        <img
          class="flex-shrink-0 rounded-circle me-3"
          src="assets/img/{{item.imagePath}}"
          [alt]="item.name"
          style="width: 80px; height: 80px;">

        <div class="w-100 d-flex flex-column text-start ps-4">
          <h5 class="d-flex justify-content-between">
            <span class="text-dark fw-medium">{{ item.name }}</span>
            <span class="text-primary price-tag">
              ${{ item.price | number:'1.2-2' }}
            </span>
          </h5>

          <small class="fst-italic text-muted mb-3">
            {{ item.description }}
          </small>

          <div class="quantity-controls d-flex align-items-center mt-2">
            <button
              class="btn btn-sm btn-outline-secondary me-2"
              (click)="decreaseQuantity(item)"
              [disabled]="item.quantity === 0">-</button>

            <span class="fw-bold mx-2">{{ item.quantity }}</span>

            <button
              class="btn btn-sm btn-primary"
              style="background-color: #FEA116; border-color: #FEA116"
              (click)="increaseQuantity(item)">+</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="order-summary text-center mt-5 p-4 rounded shadow bg-white border border-secondary">
    <h3 class="mb-3">Total Orders</h3>

    <button class="btn btn-lg btn-success w-50" (click)="confirmOrder()">
      Check Out
    </button>
  </div>

  <div *ngIf="cartItemHelper && cartItemHelper.length !== 0">

    <div class="d-flex justify-content-center mt-4">
      <ngb-pagination
        [page]="page"
        [pageSize]="pageLength"
        [collectionSize]="collectionSize"
        (pageChange)="doPagination($event)"
        [boundaryLinks]="true"
        [maxSize]="5">
      </ngb-pagination>
    </div>

    <div class="d-flex justify-content-center mt-2">
      <span class="sel d-flex align-items-center">
        <label for="pageSizeSelect" class="me-2">PageSize:</label>
        <select
          id="pageSizeSelect"
          (change)="changeSize($event)"
          class="form-select form-select-sm w-auto">
          <option value="2">2</option>
          <option value="4" selected>4</option>
          <option value="6">6</option>
          <option value="8">8</option>
          <option value="10">10</option>
        </select>
      </span>
    </div>
  </div>

</div>
